import React, { Component } from "react";
import PropTypes from "prop-types";

export default class About extends Component {
	state = {
		data: this.props.data,
	};

	componentWillReceiveProps(nextProps) {
		this.setState({ data: nextProps.data });
	}

    handleChange = event => {
		this.setState({ data: event.target.value });
	};

	updateAboutMe = event => {
		event.preventDefault();
		const update = this.state.data;
		this.props.updateItem(update);
	};

	render() {
		return (
			<div>
				<h5 className="font-accident-two-normal uppercase subtitle">Manage about me</h5>

				<div className="col-md-12">
					<div className="dividewhite2" />
					<div id="form-messages" />

					<form className="wpcf7-form" onSubmit={event => this.updateAboutMe(event)}>
						<div className="field">
							<textarea value={this.state.data} onChange={this.handleChange} />
						</div>

						<div className="field text-center">
							<button type="submit" className="btn btn-lg btn-darker">Update</button>
						</div>

					</form>

				</div>
			</div>
		);
	}
}

About.propTypes = {
	data: PropTypes.string.isRequired,
	updateItem: PropTypes.func.isRequired,
};

About.defaultProps = {
	data: "",
};
